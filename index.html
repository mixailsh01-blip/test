<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8" />
  <title>POS Service Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <script>
    (function () {
      try {
        var theme = localStorage.getItem("sm1_theme_preference");
        var resolved = theme === "light" ? "light" : "dark";
        document.documentElement.setAttribute("data-theme", resolved);
      } catch (e) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    })();
  </script>
  <style>
    html { background: #0f1626; color-scheme: dark; }
    html[data-theme="light"] { background: #f0f0f0; color-scheme: light; }
  </style>
  <link rel="stylesheet" href="css/styles.css?v=75" />
</head>

<body class="booting">
  <div id="app">
    <!-- –≠–∫—Ä–∞–Ω –ª–æ–≥–∏–Ω–∞ -->
    <div id="login-screen" class="card">
      <div class="login-brand">
        <img class="login-logo" src="assets/logo/logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø –∫–æ–º–ø–∞–Ω–∏–∏" />
        <div class="login-x">X</div>
        <div class="login-portal">PORTAL</div>
      </div>
      <p class="muted">–í—Ö–æ–¥ –ø–æ email —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –∫–æ–¥–∞.</p>

      <div class="auth-panels">
        <section class="auth-panel" data-auth-panel="email" role="tabpanel">
          <p class="muted auth-panel-hint">–û—Ç–ø—Ä–∞–≤–∏–º –∫–æ–¥ –Ω–∞ –≤–∞—à email –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.</p>

          <div class="email-auth-step" id="email-step-request">
            <div class="field">
              <span>Email</span>
              <input id="email-input" type="email" autocomplete="email" placeholder="name@company.ru" spellcheck="false" />
            </div>
            <button type="button" class="btn primary full-width" id="email-send-button">
              –ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥
            </button>
            <div id="email-request-error" class="error"></div>
          </div>

          <div class="email-auth-step hidden" id="email-step-code">
            <div class="email-auth-meta">
              <span class="email-auth-label">–ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞</span>
              <span id="email-target-label" class="email-auth-target">‚Äî</span>
              <button type="button" class="btn ghost email-change-button" id="email-change-button">
                –ò–∑–º–µ–Ω–∏—Ç—å email
              </button>
            </div>
            <div class="otp-group" id="otp-group" aria-label="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è">
              <input class="otp-input" inputmode="numeric" maxlength="1" aria-label="–¶–∏—Ñ—Ä–∞ 1" />
              <input class="otp-input" inputmode="numeric" maxlength="1" aria-label="–¶–∏—Ñ—Ä–∞ 2" />
              <input class="otp-input" inputmode="numeric" maxlength="1" aria-label="–¶–∏—Ñ—Ä–∞ 3" />
              <input class="otp-input" inputmode="numeric" maxlength="1" aria-label="–¶–∏—Ñ—Ä–∞ 4" />
              <input class="otp-input" inputmode="numeric" maxlength="1" aria-label="–¶–∏—Ñ—Ä–∞ 5" />
              <input class="otp-input" inputmode="numeric" maxlength="1" aria-label="–¶–∏—Ñ—Ä–∞ 6" />
            </div>
            <div class="email-auth-actions">
              <button type="button" class="btn primary full-width" id="email-verify-button">
                –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
              </button>
              <button type="button" class="btn ghost full-width" id="email-resend-button">
                –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
              </button>
            </div>
            <div id="email-code-error" class="error"></div>
          </div>
        </section>

      </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Ä–∞–Ω -->
    <div id="main-screen" class="hidden">
      <div class="top-bar">
        <div class="top-bar-left">
          <h2 id="main-title">–ì—Ä–∞—Ñ–∏–∫ —Å–º–µ–Ω</h2>
          <div id="current-user-label" class="muted"></div>
          <div class="top-nav" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">
            <button type="button" class="btn toggle active" data-section="schedule">–ì—Ä–∞—Ñ–∏–∫</button>
            <button type="button" class="btn toggle" data-section="clients">–ö–ª–∏–µ–Ω—Ç—ã</button>
                      </div>
        </div>

        <div class="top-bar-right">
          <button type="button" class="btn toggle" id="btn-theme-toggle">
            üåô –¢–µ–º–∞
          </button>
          <button type="button" class="btn toggle" id="btn-logout" title="–°–±—Ä–æ—Å–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é">
            üö™ –í—ã–π—Ç–∏
          </button>
          <button type="button" class="btn toggle clients-only hidden" id="clients-refresh">
            &#8635; –û–±–Ω–æ–≤–∏—Ç—å
          </button>
          <button type="button" class="btn primary ghost clients-only hidden" id="clients-save">
            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
          </button>
          <div class="schedule-actions schedule-only">
            <button type="button" class="btn toggle mobile-only" id="btn-mobile-toolbar">‚öôÔ∏è –ü–∞–Ω–µ–ª—å —Å–º–µ–Ω—ã</button>
            <button type="button" class="btn toggle mobile-only" id="btn-line-tabs">üè¢ –û—Ç–¥–µ–ª—ã</button>
            <button type="button" class="btn toggle" id="btn-legend-toggle" aria-controls="shift-legend"
              aria-expanded="false">
              üé® –õ–µ–≥–µ–Ω–¥–∞
            </button>
          </div>
          <div id="line-tabs" class="line-tabs schedule-only"></div>

          <div class="month-switcher schedule-only">
            <button type="button" class="btn toggle" id="btn-prev-month">
              &#8249;
            </button>
            <button type="button" id="current-month-label" class="month-label-button" aria-label="–í—ã–±—Ä–∞—Ç—å –º–µ—Å—è—Ü">
              –ú–µ—Å—è—Ü
            </button>
            <button type="button" class="btn toggle" id="btn-next-month">
              &#8250;
            </button>
          </div>
        </div>
      </div>

      <div id="schedule-view">
        <div class="schedule-container">
          <div class="schedule-toolbar">
            <div class="toolbar-group">
              <label for="quick-template-select">–®–∞–±–ª–æ–Ω —Å–º–µ–Ω—ã</label>
              <select id="quick-template-select"></select>
            </div>

            <div class="toolbar-group">
              <label>–í—Ä–µ–º—è</label>
              <div class="toolbar-inline">
                <input id="quick-time-from" type="time" />
                <span class="toolbar-separator">‚Äî</span>
                <input id="quick-time-to" type="time" />
              </div>
            </div>

            <div class="toolbar-group">
              <label for="quick-amount">–°—É–º–º–∞</label>
              <input id="quick-amount" type="number" min="0" step="100" />
            </div>

            <div class="toolbar-actions">
              <button type="button" class="btn toggle mobile-only" id="btn-mobile-toolbar-close">‚¨áÔ∏è –°–∫—Ä—ã—Ç—å</button>
              <button type="button" class="btn toggle" id="quick-mode-toggle">
                –ë—ã—Å—Ç—Ä–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
              </button>
              <button type="button" class="btn primary ghost" id="btn-save-pyrus">
                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ Pyrus
              </button>
            </div>
          </div>

          <div class="schedule-scroll">
            <div id="schedule-root"></div>
          </div>

          <!-- –õ–µ–≥–µ–Ω–¥–∞ —Ü–≤–µ—Ç–æ–≤ —Å–º–µ–Ω (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è) -->
          <div class="shift-legend-backdrop" id="shift-legend-backdrop" aria-hidden="true"></div>
          <div class="shift-legend shift-legend-hidden" id="shift-legend">
            <div class="shift-legend-title">–õ–µ–≥–µ–Ω–¥–∞ —Ü–≤–µ—Ç–æ–≤ —Å–º–µ–Ω</div>
            <div class="shift-legend-groups" id="shift-legend-content">
              <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ JavaScript -->
            </div>
          </div>

          <div style="padding: 8px 12px; font-size: 12px; color: var(--text-muted);">
            –†–µ–∂–∏–º: —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–∞–≤–∞—Ö <b>edit</b> (—Å–µ–π—á–∞—Å
            —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à, –±–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Pyrus).
          </div>

          <div class="change-log-panel">
            <div class="change-log-header">
              <div>
                <div class="change-log-title">–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π</div>
                <div class="change-log-subtitle">
                  –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, —Ñ–∏–∫—Å–∏—Ä—É—è –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, –ø—Ä–∞–≤–∫–∏ –∏ —É–¥–∞–ª–µ–Ω–∏–µ.
                </div>
              </div>
              <button type="button" class="btn toggle" id="btn-clear-history">
                –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
              </button>
            </div>
            <div id="change-log-list" class="change-log-list">
              –ü–æ–∫–∞ –Ω–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
            </div>
          </div>
        </div>
      </div>

      <div id="clients-view" class="clients-view hidden">
        <div class="clients-sheet">
          <div class="clients-table-wrap" id="clients-table-wrap">
            <div class="clients-state" id="clients-state">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="clients-edit-backdrop" class="clients-edit-backdrop hidden" aria-hidden="true">
    <div class="clients-edit-panel" role="dialog" aria-modal="true" aria-labelledby="clients-edit-title">
      <div class="clients-edit-header">
        <div class="clients-edit-title" id="clients-edit-title">–î–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞</div>
        <button type="button" class="clients-edit-close" id="clients-edit-close">x</button>
      </div>
      <div class="clients-edit-body" id="clients-edit-body"></div>
      <div class="clients-edit-footer">
        <div class="clients-edit-status" id="clients-edit-status"></div>
        <button type="button" class="btn toggle" id="clients-edit-cancel">–û—Ç–º–µ–Ω–∞</button>
        <button type="button" class="btn primary" id="clients-edit-save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

    <script src="js/shift-colors.js"></script>
  <script type="module" src="js/app.js?v=10"></script>
  <script type="module" src="js/clients.js?v=75"></script>
</body>

</html>
